<!-- NAVBAR -->
<nav
  class="fixed top-0 left-0 right-0 flex justify-between items-center bg-black px-4 py-2 shadow-md h-14 z-50"
>
  <div class="flex items-center space-x-4">
    <img src="assets/oh.svg" alt="Logo" class="h-10" />

    <!-- Dropdown Items -->
    <div class="relative" #dropdownWorkspaces>
      <button
        (click)="toggleDropdown('workspaces')"
        class="text-sm text-white px-2 py-1 rounded hover:bg-gray-700"
      >
        Espacios de trabajo
      </button>
      <div
        *ngIf="dropdownOpen.workspaces"
        class="absolute mt-1 bg-white text-black shadow-md rounded w-48 z-50"
      >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer">
          Mi espacio
        </a>
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer">
          Nuevo espacio
        </a>
      </div>
    </div>

    <!-- Reciente -->
    <div class="relative" #dropdownRecent>
      <button
        (click)="toggleDropdown('recent')"
        class="text-sm text-white px-2 py-1 rounded hover:bg-gray-700"
      >
        Reciente
      </button>
      <div
        *ngIf="dropdownOpen.recent"
        class="absolute mt-1 bg-white text-black shadow-md rounded w-48 z-50"
      >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer"
          >Proyecto 1</a
        >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer"
          >Proyecto 2</a
        >
      </div>
    </div>

    <!-- Marketplace -->
    <div class="relative" #dropdownMarketplace>
      <button
        (click)="toggleDropdown('marketplace')"
        class="text-sm text-white px-2 py-1 rounded hover:bg-gray-700"
      >
        Mercado
      </button>
      <div
        *ngIf="dropdownOpen.marketplace"
        class="absolute mt-1 bg-white text-black shadow-md rounded w-48 z-50"
      >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer"
          >Plantillas premium</a
        >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer"
          >Extensiones</a
        >
      </div>
    </div>

    <!-- Templates -->
    <div class="relative" #dropdownTemplates>
      <button
        (click)="toggleDropdown('templates')"
        class="text-sm text-white px-2 py-1 rounded hover:bg-gray-700"
      >
        Plantillas
      </button>
      <div
        *ngIf="dropdownOpen.templates"
        class="absolute mt-1 bg-white text-black shadow-md rounded w-48 z-50"
      >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer"
          >Scrum</a
        >
        <a class="block px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer"
          >Kanban</a
        >
      </div>
    </div>
  </div>

  <!-- User Menu -->
  <div class="relative">
    <button
      (click)="toggleUserMenu()"
      class="bg-red-600 text-white px-3 py-1 rounded transition"
    >
      Usuario ▼
    </button>
    <div
      *ngIf="showUserMenu"
      class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-md z-50"
    >
      <p class="px-4 py-2 text-sm text-gray-600 border-b">{{ userEmail }}</p>
      <button
        class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100"
      >
        Perfil
      </button>
      <button
        class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100"
      >
        Ajustes
      </button>
      <button
        class="block w-full text-left px-4 py-2 text-sm hover:bg-gray-100"
      >
        Ganancias
      </button>
      <button
        (click)="logout()"
        class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"
      >
        Cerrar sesión
      </button>
    </div>
  </div>
</nav>

<!-- MAIN LAYOUT -->
<div class="flex h-[calc(100vh-56px)] mt-14">
  <!-- SIDEBAR -->
  <aside
    style="height: 100%"
    class="fixed top-14 left-0 w-64 h-[calc(100vh-56px)] bg-gray-100 p-4 space-y-4 overflow-y-auto hidden md:block"
  >
    <!-- Accordion A -->
    <div>
      <button
        (click)="toggleAccordionA()"
        class="w-full text-left font-semibold py-2 px-3 bg-gray-200 rounded hover:bg-gray-300 flex items-center space-x-2"
      >
        <svg
          class="w-5 h-5 text-gray-700"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h8m-8 6h16"
          />
        </svg>
        <span>Opciones A</span>
      </button>
      <div
        *ngIf="accordionOpenA"
        class="pl-4 mt-2 space-y-2 text-sm text-gray-700"
      >
        <div
          class="flex items-center space-x-2 hover:bg-gray-200 p-2 rounded cursor-pointer"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M3 3h14v14H3z" />
          </svg>
          <span>Dashboard</span>
        </div>
        <div
          class="flex items-center space-x-2 hover:bg-gray-200 p-2 rounded cursor-pointer"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4" />
          </svg>
          <span>Tareas</span>
        </div>
      </div>
    </div>

    <!-- Accordion B -->
    <div>
      <button
        (click)="toggleAccordionB()"
        class="w-full text-left font-semibold py-2 px-3 bg-gray-200 rounded hover:bg-gray-300 flex items-center space-x-2"
      >
        <svg
          class="w-5 h-5 text-gray-700"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7"
          />
        </svg>
        <span>Opciones B</span>
      </button>
      <div
        *ngIf="accordionOpenB"
        class="pl-4 mt-2 space-y-2 text-sm text-gray-700"
      >
        <div
          class="flex items-center space-x-2 hover:bg-gray-200 p-2 rounded cursor-pointer"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2 5h16v10H2z" />
          </svg>
          <span>Reportes</span>
        </div>
        <div
          class="flex items-center space-x-2 hover:bg-gray-200 p-2 rounded cursor-pointer"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 2l6 6-6 6-6-6z" />
          </svg>
          <span>Configuración</span>
        </div>
      </div>
    </div>
  </aside>

  <section
    class="flex-1 ml-0 md:ml-64 p-6 overflow-y-auto h-[calc(100vh-56px)]"
  >
    <h1
      class="text-3xl w-full font-black font-extrabold mb-8 text-gray-900 text-center tracking-wide uppercase border-b-4 border-red-500 inline-block pb-2"
    >
      Panel Principal
    </h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <!-- Primeros 4: fondo negro -->
      <div
        class="bg-black rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <!-- Icono con fondo circular alineado -->
        <div
          class="w-12 h-12 bg-red-900 bg-opacity-30 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-red-500 text-2xl">account_balance</mat-icon>
          </div>
        </div>

        <!-- Texto a la derecha -->
        <div class="text-right text-white ml-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-1"
          >
            Cuentas Activas
          </h3>
          <p class="text-2xl font-bold leading-tight">2,450</p>
        </div>
      </div>

      <div
        class="bg-black rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div
          class="w-12 h-12 bg-green-900 bg-opacity-30 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-green-500 text-2xl">attach_money</mat-icon>
          </div>
        </div>

        <div class="text-right text-white ml-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-1"
          >
            Créditos Otorgados
          </h3>
          <p class="text-2xl font-bold leading-tight">S/ 1.2M</p>
        </div>
      </div>

      <div
        class="bg-black rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div
          class="w-12 h-12 bg-yellow-900 bg-opacity-30 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-yellow-500 text-2xl">pending</mat-icon>
          </div>
        </div>

        <div class="text-right text-white ml-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-1"
          >
            Solicitudes Pendientes
          </h3>
          <p class="text-2xl font-bold leading-tight">87</p>
        </div>
      </div>

      <div
        class="bg-black rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div
          class="w-12 h-12 bg-red-900 bg-opacity-30 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-red-700 text-2xl">trending_down</mat-icon>
          </div>
        </div>

        <div class="text-right text-white ml-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-1"
          >
            Índice de Morosidad
          </h3>
          <p class="text-2xl font-bold leading-tight">3.5%</p>
        </div>
      </div>

      <!-- Restantes: fondo blanco -->
      <div
        class="bg-white rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div class="text-left text-gray-800 mr-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-1"
          >
            Nuevos Usuarios
          </h3>
          <p class="text-2xl font-bold leading-tight">+15%</p>
        </div>

        <div
          class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-blue-500 text-2xl">person_add</mat-icon>
          </div>
        </div>
      </div>

      <div
        class="bg-white rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div class="text-left text-gray-800 mr-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-1"
          >
            Ingresos Totales
          </h3>
          <p class="text-2xl font-bold leading-tight">S/ 550,000</p>
        </div>

        <div
          class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-green-500 text-2xl">monetization_on</mat-icon>
          </div>
        </div>
      </div>

      <div
        class="bg-white rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div class="text-left text-gray-800 mr-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-1"
          >
            Préstamos Aprobados
          </h3>
          <p class="text-2xl font-bold leading-tight">320</p>
        </div>

        <div
          class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-indigo-500 text-2xl"
              >check_circle_outline</mat-icon
            >
          </div>
        </div>
      </div>

      <div
        class="bg-white rounded-xl shadow-lg p-5 flex items-center justify-between hover:shadow-xl transition duration-300"
      >
        <div class="text-left text-gray-800 mr-4 flex-1">
          <h3
            class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-1"
          >
            Clientes Activos
          </h3>
          <p class="text-2xl font-bold leading-tight">1,800</p>
        </div>

        <div
          class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center"
        >
          <div>
            <mat-icon class="text-purple-500 text-2xl">groups</mat-icon>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
